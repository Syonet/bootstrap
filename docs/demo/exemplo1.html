<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Exemplo1</title>
		<meta name="viewport" content="width=device-width">
		
		<link rel="stylesheet" href="../../dist/bootstrap.css">
		<link rel="stylesheet" href="../../dist/jquery.ui.css">
		
		<style>
			.syo-datagrid-body {
				max-height: 300px;
			}
		</style>
	</head>
	<body>
		<div class="syo-hidden">
			<div class="dialog-status" title="Status">
				<table>
					<caption>Status globais</caption>
					<thead>
						<tr>
							<th>Nome</th>
							<th>Jovem</th>
							<th>Acima da média</th>
							<th>Abaixo da média</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Jill Valentine</td>
							<td class="icon-checkmark"></td>
							<td class="icon-checkmark"></td>
							<td></td>
						</tr>
						<tr>
							<td>Chris Redfield</td>
							<td></td>
							<td class="icon-checkmark"></td>
							<td></td>
						</tr>
						<tr>
							<td>Albert Wesker</td>
							<td></td>
							<td class="icon-checkmark"></td>
							<td></td>
						</tr>
						<tr>
							<td>Leon Kennedy</td>
							<td class="icon-checkmark"></td>
							<td></td>
							<td class="icon-checkmark"></td>
						</tr>
						<tr>
							<td>Ada Wong</td>
							<td class="icon-checkmark"></td>
							<td class="icon-checkmark"></td>
							<td></td>
						</tr>
						<tr>
							<td>Claire Redfield</td>
							<td class="icon-checkmark"></td>
							<td></td>
							<td class="icon-checkmark"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="dialog-detalhes" title="Alterar informações do usuário">
				<div class="syo-field">
					<label for="exemplo1-id" style="width: 100px;">Id:</label>
					<input type="text" id="exemplo1-id" disabled>
				</div>
				<div class="syo-field">
					<label for="exemplo1-nome" style="width: 100px;">Nome:</label>
					<input type="text" placeholder="Digite o nome" id="exemplo1-nome">
				</div>
				<div class="syo-field">
					<label for="exemplo1-nome" style="width: 100px;">Sobrenome:</label>
					<input type="text" placeholder="Digite o sobrenome" id="exemplo1-sobrenome">
				</div>
			</div>
		</div>
		<div class="datagrid">
			<div>
				<table>
					<caption>Lista de pontos dos usuários ativos</caption>
					<colgroup>
						<col style="width: 50px">
						<col style="width: 200px">
						<col style="width: 200px">
						<col>
					</colgroup>
					<thead>
						<tr>
							<th>#</th>
							<th>Nome</th>
							<th>Sobrenome</th>
							<th>Pontos</th>
						</tr>
					</thead>
				</table>
			</div>
			<div>
				<div>
					<table>
						<colgroup>
							<col style="width: 50px">
							<col style="width: 200px">
							<col style="width: 200px">
							<col>
						</colgroup>
						<tbody>
							<tr data-id="1">
								<td>1</td>
								<td>Jill</td>
								<td>Valentine</td>
								<td>33</td>
							</tr>
							<tr data-id="2">
								<td>2</td>
								<td>Chris</td>
								<td>Redfield</td>
								<td>74</td>
							</tr>
							<tr data-id="3">
								<td>3</td>
								<td>Albert</td>
								<td>Wesker</td>
								<td>90</td>
							</tr>
							<tr data-id="4">
								<td>4</td>
								<td>Leon</td>
								<td>Kennedy</td>
								<td>19</td>
							</tr>
							<tr data-id="5">
								<td>5</td>
								<td>Ada</td>
								<td>Wong</td>
								<td>88</td>
							</tr>
							<tr data-id="6">
								<td>6</td>
								<td>Claire</td>
								<td>Redfield</td>
								<td>25</td>
							</tr>
							<tr data-id="7">
								<td>7</td>
								<td>Edward</td>
								<td>Spencer</td>
								<td>31</td>
							</tr>
							<tr data-id="8">
								<td>8</td>
								<td>Ashley</td>
								<td>Graham</td>
								<td>2</td>
							</tr>
							<tr data-id="9">
								<td>9</td>
								<td>Alexia</td>
								<td>Ashford</td>
								<td>85</td>
							</tr>
							<tr data-id="10">
								<td>10</td>
								<td>Willian</td>
								<td>Birkin</td>
								<td>60</td>
							</tr>
							<tr data-id="11">
								<td>11</td>
								<td>Brad</td>
								<td>Vickers</td>
								<td>61</td>
							</tr>
							<tr data-id="12">
								<td>12</td>
								<td>Recebba</td>
								<td>Chambers</td>
								<td>68</td>
							</tr>
							<tr data-id="13">
								<td>13</td>
								<td>James</td>
								<td>Marcus</td>
								<td>90</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div>
				<button class="syo-button btn-status">
					<span class="icon-menu">Status</span>
				</button>
			</div>
		</div>
		
		<script src="../../external/jquery.js"></script>
		<script src="../../external/jquery.ui.js"></script>
		<script src="../../dist/bootstrap.js"></script>
		<script>
			(function() {
				$(function() {
					var $dialogStatus = $( ".dialog-status" ).dialog({
						modal: true,
						autoOpen: false,
						width: 600
					});
					var $dialogDetalhes = $( ".dialog-detalhes" ).dialog({
						autoOpen: false,
						resizable: false,
						width: 400,
						buttons: {
							Ok: function() {
								var id = +$( "#exemplo1-id" ).val();
								var name = $( "#exemplo1-nome" ).val();
								var surname = $( "#exemplo1-sobrenome" ).val();
								var $tr = getGridTR( id );
								
								$tr.find( "td:eq(1)" ).text( name );
								$tr.find( "td:eq(2)" ).text( surname );
								
								$( this ).dialog( "close" );
							}
						}
					});
					
					function getData( id ) {
						var data = {};
						var $tr = getGridTR( id );
						
						data.id = id;
						data.name = $tr.find( "td:eq(1)" ).text().trim();
						data.surname = $tr.find( "td:eq(2)" ).text().trim();
						
						return data;
					}
					
					function getGridTR( id ) {
						var $targetTR;
						
						$( ".datagrid tr" ).each(function() {
							var $tr = $( this );
							if ( $tr.data( "id" ) === id ) {
								$targetTR = $tr;
							}
						});
						
						return $targetTR;
					}
					
					$( ".btn-status" ).click(function() {
						$dialogStatus.dialog( "open" );
					});
					$( ".datagrid" ).syoDataGrid({
						click: function() {
							var data = getData( $( this ).data( "id" ) );
							
							$( "#exemplo1-id" ).val( data.id );
							$( "#exemplo1-nome" ).val( data.name );
							$( "#exemplo1-sobrenome" ).val( data.surname );
							$dialogDetalhes.dialog( "open" );
						}
					});
					$( ".pagination" ).syoPagination({
						items: 3
					});
				});
			}());
		</script>
	</body>
</html>